<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ service.title }} - –°—Ç—Ä–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <style>
      .detail-page-image {
        width: 100%;
        height: 280px;
        overflow: hidden;
        position: relative;
      }

      .detail-page-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .action-buttons {
        display: flex;
        gap: 10px;
        margin-top: 20px;
      }

      .action-buttons .btn {
        padding: 10px 20px;
        border-radius: 4px;
        text-decoration: none;
        text-align: center;
        display: inline-block;
        cursor: pointer;
        border: none;
        font-size: 16px;
      }

      .action-buttons .btn-primary {
        background-color: #007bff;
        color: white;
      }

      .action-buttons .btn-outline-primary {
        background-color: transparent;
        color: #007bff;
        border: 1px solid #007bff;
      }

      .messages {
        margin-bottom: 20px;
      }

      .messages .message {
        padding: 10px 15px;
        margin-bottom: 10px;
        border-radius: 4px;
      }

      .messages .success {
        background-color: #d4edda;
        color: #155724;
      }

      .messages .error {
        background-color: #f8d7da;
        color: #721c24;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="container">
        <div class="home-link">
          <a href="{% url 'index' %}">üè† –î–æ–º–æ–π</a>
        </div>
        <div class="logo">–°—Ç—Ä–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å</div>
        <div class="header-right">
          {% if user.is_authenticated %}
          <span>{{ user.username }}</span>
          {% endif %}
        </div>
      </div>
    </header>

    <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
    {% if messages %}
    <div class="container">
      <div class="messages">
        {% for message in messages %}
        <div class="message {{ message.tags }}">{{ message }}</div>
        {% endfor %}
      </div>
    </div>
    {% endif %}

    <section>
      <div class="container">
        <p>
          <a href="{% url 'index' %}" class="hero-back-link"
            >–ù–∞–∑–∞–¥ –∫ –æ–±—ä–µ–∫—Ç–∞–º</a
          >
        </p>
      </div>
    </section>

    <main>
      <div class="container">
        <div class="detail-page-card">
          <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
          <div class="detail-page-image">
            <img src="{{ service.image_url }}" alt="{{ service.title }}" />
          </div>

          <div class="detail-page-content">
            <div class="property-type">{{ service.category }}</div>
            <h1 class="detail-page-title">{{ service.title }}</h1>
            <p class="address">{{ service.description }}</p>

            <div class="detail-page-specs">
              <div class="spec-item">
                <span class="spec-icon"></span>
                <div>
                  <div class="spec-label">–ü–ª–æ—â–∞–¥—å</div>
                  <div class="spec-value">{{ service.area }} –º¬≤</div>
                </div>
              </div>
              <div class="spec-item">
                <span class="spec-icon"></span>
                <div>
                  <div class="spec-label">–≠—Ç–∞–∂–µ–π</div>
                  <div class="spec-value">{{ service.total_floors }}</div>
                </div>
              </div>
              <div class="spec-item">
                <span class="spec-icon"></span>
                <div>
                  <div class="spec-label">–¢–∏–ø</div>
                  <div class="spec-value">{{ service.category }}</div>
                </div>
              </div>
            </div>

            <div class="detail-page-price">{{ service.price }} ‚ÇΩ</div>

            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="action-buttons">
              {% if user.is_authenticated %}
              <form
                method="post"
                action="{% url 'add_to_request' service_id %}"
              >
                {% csrf_token %}
                <input
                  type="hidden"
                  name="next"
                  value="{% url 'service_detail' service_id %}"
                />
                <button type="submit" class="btn btn-primary">
                  <i class="fas fa-cart-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞—è–≤–∫—É
                </button>
              </form>
              {% endif %}
            </div>

            <div class="info-box">
              <div class="info-box-header">–û–ø–∏—Å–∞–Ω–∏–µ</div>
              <div class="info-box-body">
                <p>{{ service.full_description }}</p>
              </div>
            </div>

            <div class="info-box">
              <div class="info-box-header">–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ</div>
              <div class="info-box-body">
                <p>üìç {{ service.location }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer>
      <p>¬© 2025 –°—Ç—Ä–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </footer>
  </body>
</html>