<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –Ω–∞–¥–∑–æ—Ä - –°—Ç—Ä–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <style>
      .product-thumbnail {
        width: 60px;
        height: 60px;
        object-fit: cover;
        border-radius: 4px;
      }
      
      .status-badge {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 14px;
        font-weight: bold;
        margin-left: 10px;
      }
      
      .status-deleted {
        background-color: #f8d7da;
        color: #721c24;
      }
      
      .status-draft {
        background-color: #e2e3e5;
        color: #383d41;
      }
      
      .status-submitted {
        background-color: #d1ecf1;
        color: #0c5460;
      }
      
      .status-completed {
        background-color: #d4edda;
        color: #155724;
      }
      
      .status-rejected {
        background-color: #f8d7da;
        color: #721c24;
      }
      
      .status-not-found {
        background-color: #f8d7da;
        color: #721c24;
      }
      
      .deleted-notice {
        background-color: #f8d7da;
        color: #721c24;
        padding: 10px 15px;
        margin: 10px 0;
        border-radius: 4px;
        border-left: 5px solid #721c24;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="container">
        <div class="home-link">
          <a href="{% url 'index' %}">üè† –î–æ–º–æ–π</a>
        </div>
        <div class="logo">–°—Ç—Ä–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å</div>
        <div class="header-right"></div>
      </div>
    </header>

    <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
    {% if messages %}
    <div class="container">
      <div class="messages">
        {% for message in messages %}
        <div class="message {{ message.tags }}">{{ message }}</div>
        {% endfor %}
      </div>
    </div>
    {% endif %}

    <section>
      <div class="container">
        <p>
          <a href="{% url 'index' %}" class="hero-back-link"
            >–ù–∞–∑–∞–¥ –∫ –∫–æ—Ä–ø—É—Å–∞–º</a
          >
        </p>
      </div>
    </section>

    <main>
      <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å ID –∑–∞—è–≤–∫–∏ –∏ —Å—Ç–∞—Ç—É—Å–æ–º -->
        <h1 class="section-title">
          –ó–∞—è–≤–∫–∞ –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –Ω–∞–¥–∑–æ—Ä #{{ build_request.id }}
          <span class="status-badge status-{{ build_request.status }}">
            {{ build_request.get_status_display }}
          </span>
        </h1>
        
        {% if build_request.is_deleted %}
        <div class="deleted-notice">
          <strong>–í–Ω–∏–º–∞–Ω–∏–µ!</strong> –≠—Ç–∞ –∑–∞—è–≤–∫–∞ –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.
        </div>
        {% endif %}
        
        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ -->
        <div class="customer-info">
          <h2 class="section-title">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑—á–∏–∫–µ</h2>
          <form class="customer-form">
            <div class="form-row">
              <div class="form-group">
                <label>–§–ò–û –∑–∞–∫–∞–∑—á–∏–∫–∞*</label>
                <input
                  type="text"
                  value="{{ build_request.user_name }}"
                  placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á"
                  readonly
                />
              </div>
              <div class="form-group">
                <label>–¢–µ–ª–µ—Ñ–æ–Ω*</label>
                <input
                  type="tel"
                  value="{{ build_request.phone }}"
                  placeholder="+7 (999) 123-45-67"
                  readonly
                />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>Email</label>
                <input
                  type="email"
                  value="{{ build_request.email }}"
                  placeholder="example@mail.ru"
                  readonly
                />
              </div>
              <div class="form-group">
                <label>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã*</label>
                <input
                  type="text"
                  value="{{ build_request.payment_method }}"
                  placeholder="–Ω–∞–ª–∏—á–Ω—ã–µ"
                  readonly
                />
              </div>
            </div>
          </form>
        </div>

        <!-- –¢–∞–±–ª–∏—Ü–∞ –∫–æ—Ä–ø—É—Å–æ–≤ -->
        <div class="order-table-container">
          <h2 class="section-title">
            –ö–æ—Ä–ø—É—Å—ã –ú–ì–¢–£ –≤ –∑–∞—è–≤–∫–µ –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –Ω–∞–¥–∑–æ—Ä #{{ build_request.id }}
          </h2>
          <table class="order-table">
            <thead>
              <tr>
                <th>Img</th>
                <th>–ö–æ—Ä–ø—É—Å</th>
                <th>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–∏</th>
                <th>–ü—Ä–æ—Ü–µ–Ω—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏</th>
                <th>–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
              </tr>
            </thead>
            <tbody>
              {% for item in build_request.items %}
              <tr>
                <td>
                  <img
                    src="{{ item.product.image_url }}"
                    class="product-thumbnail"
                    alt="{{ item.product.title }}"
                  />
                </td>
                <td>{{ item.product.title }}</td>
                <td>–†–∞–±–æ—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏</td>
                <td>100%</td>
                <td>5.0</td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="5" style="text-align: center;">–í –∑–∞—è–≤–∫–µ –Ω–µ—Ç –æ–±—ä–µ–∫—Ç–æ–≤</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </main>

    <footer>
      <p>¬© 2025 –°—Ç—Ä–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </footer>
  </body>
</html>